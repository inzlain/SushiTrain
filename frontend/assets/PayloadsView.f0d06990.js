import{_ as g}from"./_plugin-vue_export-helper.cdc0426e.js";import{f as $,o,c as l,a as s,t as _,d as w,b as f,F as m,r as D,e as k,g as C,h,T as x,k as p,i as b,j as c}from"./index.9eb82cac.js";const L={props:["name","id"],data(){return{showModal:!1}},methods:{deletePayload(){fetch("/api/payloads/"+this.id,{method:"DELETE"}).then(t=>t.json()).then(t=>{t.deleted===!0?this.$emit("afterDelete"):this.error=t.error})}}},M={key:0,class:"modal is-active"},T={class:"modal-card"},V={class:"modal-card-head"},j=s("p",{class:"modal-card-title"},"Delete Payload",-1),A={class:"modal-card-body"},B={class:"has-text-black"},E=s("br",null,null,-1),N=s("p",{class:"has-text-black"},"This will also delete all modules associated with this payload.",-1),F={class:"modal-card-foot"},I={class:"field is-grouped"},R={class:"control"},z={class:"control"},G=s("a",null,[s("i",{class:"fas fa-trash"})],-1),S=[G];function q(t,e,y,P,a,u){const r=$("tooltip");return o(),l(m,null,[a.showModal?(o(),l("div",M,[s("div",{class:"modal-background",onClick:e[0]||(e[0]=d=>a.showModal=!1)}),s("div",T,[s("header",V,[j,s("button",{class:"delete","aria-label":"close",onClick:e[1]||(e[1]=d=>a.showModal=!1)})]),s("section",A,[s("p",B,"Are you sure you want to delete "+_(y.name)+"?",1),E,N]),s("footer",F,[s("div",I,[s("div",R,[s("button",{type:"button",class:"button is-link is-danger",onClick:e[2]||(e[2]=d=>{a.showModal=!1,u.deletePayload()})},"Delete")]),s("div",z,[s("button",{type:"button",class:"button is-link is-success",onClick:e[3]||(e[3]=d=>a.showModal=!1)},"Cancel")])])])])])):w("",!0),s("div",null,[f((o(),l("span",{class:"icon",onClick:e[4]||(e[4]=d=>a.showModal=!0)},S)),[[r,"Delete payload",void 0,{top:!0}]])])],64)}const H=g(L,[["render",q]]),J={components:{PayloadDelete:H},data(){return{payloads:[],isLoading:!0}},methods:{getPayloads(){fetch("/api/payloads").then(t=>t.json()).then(t=>{this.payloads=t,this.isLoading=!1})},generatePayload(t){t>0&&fetch("/api/payloads/"+t+"/generate").then(e=>e.json()).then(e=>{e.generated===!0?D.push("/payloads/logs/"+t+"/view/"+e.payload_log_id):this.error=e.error})}},created(){this.getPayloads(),this.timer=setInterval(this.getPayloads,3e4)},unmounted(){clearInterval(this.timer)}},K={key:0},O=s("span",{class:"icon"},[s("i",{class:"fas fa-plus"})],-1),Q=s("span",null,"Add Payload",-1),U=s("br",null,null,-1),W={class:"message-header"},X={class:"is-size-4"},Y=s("i",{class:"fas fa-bomb","aria-hidden":"true"},null,-1),Z={class:"message-body"},ss={class:"table is-fullwidth is-hoverable has-background-primary-light"},es=s("thead",null,[s("tr",null,[s("th",null,"Module"),s("th")])],-1),ts={key:0},os=s("i",{class:"fas fa-plus"},null,-1),ls={key:1},as=s("i",{class:"fas fa-arrow-down"},null,-1),ns=s("td",null,null,-1),is=["onClick"],ds=s("span",{class:"icon"},[s("i",{class:"fas fa-hammer"})],-1),rs=s("span",null,"Generate",-1),cs=[ds,rs],_s=s("span",{class:"icon"},[s("i",{class:"fas fa-rectangle-list"})],-1),us=s("span",null,"Logs",-1);function hs(t,e,y,P,a,u){const r=k("RouterLink"),d=k("PayloadDelete"),v=$("tooltip");return o(),C(x,null,{default:h(()=>[a.isLoading===!1?(o(),l("div",K,[s("div",null,[p(r,{class:"button is-link",to:"/payloads/add"},{default:h(()=>[O,Q]),_:1})]),U,(o(!0),l(m,null,b(a.payloads,n=>(o(),l("article",{class:"message is-primary",key:n.id},[s("div",W,[s("div",null,[s("p",X,[Y,c("\xA0 "),p(r,{to:{name:"payloads-edit",params:{id:n.id}}},{default:h(()=>[c(_(n.name),1)]),_:2},1032,["to"])]),s("p",null,_(n.notes),1)]),p(d,{name:n.name,id:n.id,onAfterDelete:u.getPayloads},null,8,["name","id","onAfterDelete"])]),s("div",Z,[s("table",ss,[es,s("tbody",null,[(o(!0),l(m,null,b(n.modules,i=>(o(),l("tr",{key:i.id},[i.supports_input===!1?f((o(),l("td",ts,[os,c(" "+_(i.name),1)])),[[v,i.description,void 0,{left:!0}]]):f((o(),l("td",ls,[as,c(" "+_(i.name),1)])),[[v,i.description,void 0,{left:!0}]]),ns]))),128))])]),s("button",{class:"button is-link is-outlined",onClick:i=>u.generatePayload(n.id)},cs,8,is),c(" \xA0 "),p(r,{class:"button is-link is-outlined",to:{name:"payloads-logs",params:{id:n.id}}},{default:h(()=>[_s,us]),_:2},1032,["to"])])]))),128))])):w("",!0)]),_:1})}const ms=g(J,[["render",hs]]);export{ms as default};

import{bA as _,bB as w,o as i,g as p,h,T as u,c as l,a as s,t as f,d as c,b as r,v as n}from"./index.eecb294c.js";import{_ as v}from"./_plugin-vue_export-helper.cdc0426e.js";const m={data(){return{current_password:"",new_password:"",new_password_again:"",isLoading:!1,error:""}},methods:{setNewPassword(){if(this.current_password===""){this.error="Current password cannot be blank";return}if(this.new_password===""){this.error="New password cannot be blank";return}if(this.new_password!==this.new_password_again){this.error="New passwords don't match";return}const a=JSON.stringify({username:_(),current_password:this.current_password,new_password:this.new_password});fetch("/api/profile",{method:"PUT",body:a}).then(e=>e.json()).then(e=>{e.modified===!0?(this.current_password="",this.new_password="",this.new_password_again="",this.error="",w()):(this.error=e.error,window.scrollTo(0,0))})}}},b={key:0},g={key:0,class:"message is-danger"},P=s("div",{class:"message-header"},[s("p",null,"Error")],-1),y={class:"message-body"},N={class:"box"},k=s("h1",{class:"title"},"User Profile",-1),x=s("h1",{class:"title is-4"},"Change Password",-1),C={class:"tile is-ancestor"},U={class:"tile is-parent is-4"},V={class:"tile is-child"},B={class:"field"},T=s("label",{class:"label"},"Current Password",-1),q={class:"control"},S={class:"tile is-ancestor"},j={class:"tile is-parent is-4"},D={class:"tile is-child"},E={class:"field"},L=s("label",{class:"label"},"New Password",-1),A={class:"control"},J={class:"tile is-ancestor"},M={class:"tile is-parent is-4"},O={class:"tile is-child"},z={class:"field"},F=s("label",{class:"label"},"New Password (again)",-1),G={class:"control"},H={class:"field is-grouped"},I={class:"control"},K=s("span",{class:"icon"},[s("i",{class:"fas fa-wrench"})],-1),Q=s("span",null,"Set Password",-1),R=[K,Q];function W(a,e,X,Y,o,d){return i(),p(u,null,{default:h(()=>[o.isLoading===!1?(i(),l("div",b,[o.error?(i(),l("article",g,[P,s("div",y,f(o.error),1)])):c("",!0),s("div",N,[k,x,s("div",null,[s("div",C,[s("div",U,[s("div",V,[s("div",B,[T,s("div",q,[r(s("input",{class:"input",type:"password",placeholder:"********","onUpdate:modelValue":e[0]||(e[0]=t=>o.current_password=t),required:""},null,512),[[n,o.current_password]])])])])])]),s("div",S,[s("div",j,[s("div",D,[s("div",E,[L,s("div",A,[r(s("input",{class:"input",type:"password",placeholder:"********","onUpdate:modelValue":e[1]||(e[1]=t=>o.new_password=t),required:""},null,512),[[n,o.new_password]])])])])])]),s("div",J,[s("div",M,[s("div",O,[s("div",z,[F,s("div",G,[r(s("input",{class:"input",type:"password",placeholder:"********","onUpdate:modelValue":e[2]||(e[2]=t=>o.new_password_again=t),required:""},null,512),[[n,o.new_password_again]])])])])])]),s("div",H,[s("div",I,[s("button",{class:"button is-link",type:"submit",onClick:e[3]||(e[3]=(...t)=>d.setNewPassword&&d.setNewPassword(...t))},R)])])])])])):c("",!0)]),_:1})}const ss=v(m,[["render",W]]);export{ss as default};

import{_ as v}from"./_plugin-vue_export-helper.cdc0426e.js";import{f as w,o as s,c as a,a as t,t as c,d as g,b as m,F as b,j as n,e as k,g as C,h as y,T as M,k as f,i as D}from"./index.9eb82cac.js";import{c as R}from"./clipboard.a5185029.js";const P={props:["hostname","id"],data(){return{showModal:!1}},methods:{deleteRedirector(){fetch("/api/redirectors/"+this.id,{method:"DELETE"}).then(l=>l.json()).then(l=>{l.deleted===!0?this.$emit("afterDelete"):this.error=l.error})}}},E={key:0,class:"modal is-active"},T={class:"modal-card"},L={class:"modal-card-head"},N=t("p",{class:"modal-card-title"},"Delete Redirector",-1),j={class:"modal-card-body"},V={class:"has-text-black"},B=t("br",null,null,-1),U=t("p",{class:"has-text-black"},"This will also delete all paths associated with this redirector.",-1),S={class:"modal-card-foot"},F={class:"field is-grouped"},I={class:"control"},z={class:"control"},G=t("a",null,[t("i",{class:"fas fa-trash"})],-1),q=[G];function H(l,e,r,$,i,_){const d=w("tooltip");return s(),a(b,null,[i.showModal?(s(),a("div",E,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=h=>i.showModal=!1)}),t("div",T,[t("header",L,[N,t("button",{class:"delete","aria-label":"close",onClick:e[1]||(e[1]=h=>i.showModal=!1)})]),t("section",j,[t("p",V,"Are you sure you want to delete "+c(r.hostname)+"?",1),B,U]),t("footer",S,[t("div",F,[t("div",I,[t("button",{type:"button",class:"button is-link is-danger",onClick:e[2]||(e[2]=h=>{i.showModal=!1,_.deleteRedirector()})},"Delete")]),t("div",z,[t("button",{type:"button",class:"button is-link is-success",onClick:e[3]||(e[3]=h=>i.showModal=!1)},"Cancel")])])])])])):g("",!0),t("div",null,[m((s(),a("span",{class:"icon",onClick:e[4]||(e[4]=h=>i.showModal=!0)},q)),[[d,"Delete redirector",void 0,{top:!0}]])])],64)}const J=v(P,[["render",H]]),K={props:["path","path_id","redirector_id"],data(){return{showModal:!1}},methods:{deletePath(){fetch("/api/paths/"+this.path_id,{method:"DELETE"}).then(l=>l.json()).then(l=>{l.deleted===!0?this.$emit("afterDelete"):this.error=l.error})}}},O={key:0,class:"modal is-active has-text-left"},Q={class:"modal-card"},W={class:"modal-card-head"},X=t("p",{class:"modal-card-title"},"Delete Path",-1),Y={class:"modal-card-body"},Z={class:"has-text-black"},tt={class:"modal-card-foot"},st={class:"field is-grouped"},et={class:"control"},ot={class:"control"},at=t("a",null,[t("i",{class:"fas fa-trash"})],-1),lt=[at];function it(l,e,r,$,i,_){const d=w("tooltip");return s(),a(b,null,[i.showModal?(s(),a("div",O,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=h=>i.showModal=!1)}),t("div",Q,[t("header",W,[X,t("button",{class:"delete","aria-label":"close",onClick:e[1]||(e[1]=h=>i.showModal=!1)})]),t("section",Y,[t("p",Z,[n("Are you sure you want to delete "),t("strong",null,c(r.path),1),n("?")])]),t("footer",tt,[t("div",st,[t("div",et,[t("button",{type:"button",class:"button is-link is-danger",onClick:e[2]||(e[2]=h=>{i.showModal=!1,_.deletePath()})},"Delete")]),t("div",ot,[t("button",{type:"button",class:"button is-link is-success",onClick:e[3]||(e[3]=h=>i.showModal=!1)},"Cancel")])])])])])):g("",!0),t("div",null,[m((s(),a("span",{class:"icon",onClick:e[4]||(e[4]=h=>i.showModal=!0)},lt)),[[d,"Delete path",void 0,{top:!0}]])])],64)}const nt=v(K,[["render",it]]),dt={props:["status"],data(){return{showModal:!1}},methods:{changePathStatus(){fetch("/api/paths/all/"+this.status,{method:"GET"}).then(l=>l.json()).then(l=>{l.enabled===!0||l.enabled===!1?this.$emit("afterChange"):this.error=l.error})}}},ct={key:0,class:"modal is-active"},rt={class:"modal-card"},ht={class:"modal-card-head"},_t={class:"modal-card-title"},ut={class:"modal-card-body"},ft={class:"has-text-black"},mt=t("strong",null,"all",-1),pt=t("strong",null,"all",-1),yt=t("br",null,null,-1),bt=t("p",{class:"has-text-black"},"This will change the enabled status of every single path.",-1),kt={class:"modal-card-foot"},vt={class:"field is-grouped"},gt={class:"control"},$t={class:"control"},wt={class:"icon"},Ct={key:0,class:"fas fa-circle-check"},Dt={key:1,class:"fas fa-circle-xmark"};function xt(l,e,r,$,i,_){return s(),a(b,null,[i.showModal?(s(),a("div",ct,[t("div",{class:"modal-background",onClick:e[0]||(e[0]=d=>i.showModal=!1)}),t("div",rt,[t("header",ht,[t("p",_t,c(r.status[0].toUpperCase()+r.status.slice(1))+" All Paths",1),t("button",{class:"delete","aria-label":"close",onClick:e[1]||(e[1]=d=>i.showModal=!1)})]),t("section",ut,[t("p",ft,[n("Are you sure you want "+c(r.status)+" ",1),mt,n(" paths across "),pt,n(" redirectors?")]),yt,bt]),t("footer",kt,[t("div",vt,[t("div",gt,[t("button",{type:"button",class:"button is-link is-danger",onClick:e[2]||(e[2]=d=>{i.showModal=!1,_.changePathStatus()})},c(r.status[0].toUpperCase()+r.status.slice(1))+" All",1)]),t("div",$t,[t("button",{type:"button",class:"button is-link is-success",onClick:e[3]||(e[3]=d=>i.showModal=!1)},"Cancel")])])])])])):g("",!0),t("div",{class:"button is-link",onClick:e[4]||(e[4]=d=>i.showModal=!0)},[t("span",wt,[r.status==="enable"?(s(),a("i",Ct)):(s(),a("i",Dt))]),t("span",null,c(r.status[0].toUpperCase()+r.status.slice(1))+" All Paths",1)])],64)}const At=v(dt,[["render",xt]]),Mt={components:{RedirectorDelete:J,PathDelete:nt,AllPathsEnableDisable:At},data(){return{redirectors:[],isLoading:!0}},methods:{copyToClipboard:R,getRedirectors(){fetch("/api/redirectors").then(l=>l.json()).then(l=>{this.redirectors=l,this.isLoading=!1})}},created(){this.getRedirectors(),this.timer=setInterval(this.getRedirectors,3e4)},unmounted(){clearInterval(this.timer)}},Rt={key:0},Pt=t("span",{class:"icon"},[t("i",{class:"fas fa-plus"})],-1),Et=t("span",null,"Add Redirector",-1),Tt=t("br",null,null,-1),Lt={class:"message-header"},Nt={class:"is-size-4"},jt=t("i",{class:"fas fa-server","aria-hidden":"true"},null,-1),Vt={class:"message-body"},Bt={class:"table is-fullwidth is-hoverable has-background-primary-light"},Ut=t("thead",null,[t("tr",null,[t("th",{style:{width:"2%"}}),t("th",{style:{width:"25%"}},"Path"),t("th",{style:{width:"23%"}},"Policy"),t("th",{style:{width:"20%"}},"Allow Action"),t("th",{style:{width:"20%"}},"Deny Action"),t("th",{style:{width:"5%"}},"Enabled"),t("th",{style:{width:"5%"}},"Delete")])],-1),St={class:"icon",style:{"text-decoration":"none"}},Ft=["onClick"],It={class:"is-truncated"},zt={key:0,class:"is-truncated"},Gt={key:1,class:"is-truncated"},qt={key:2,class:"is-truncated"},Ht=t("i",{class:"fas fa-bomb","aria-hidden":"true"},null,-1),Jt={key:3,class:"is-truncated"},Kt=t("i",{class:"fas fa-file","aria-hidden":"true"},null,-1),Ot={key:4,class:"is-truncated"},Qt=t("i",{class:"fas fa-right-left","aria-hidden":"true"},null,-1),Wt={key:5,class:"is-truncated"},Xt=t("i",{class:"fas fa-diamond-turn-right","aria-hidden":"true"},null,-1),Yt={key:6,class:"is-truncated"},Zt=t("i",{class:"fas fa-x","aria-hidden":"true"},null,-1),ts={key:7,class:"is-truncated"},ss=t("span",{class:"has-text-danger"},[t("i",{class:"fas fa-triangle-exclamation","aria-hidden":"true"})],-1),es={key:8,class:"is-truncated"},os=t("i",{class:"fas fa-bomb","aria-hidden":"true"},null,-1),as={key:9,class:"is-truncated"},ls=t("i",{class:"fas fa-file","aria-hidden":"true"},null,-1),is={key:10,class:"is-truncated"},ns=t("i",{class:"fas fa-right-left","aria-hidden":"true"},null,-1),ds={key:11,class:"is-truncated"},cs=t("i",{class:"fas fa-diamond-turn-right","aria-hidden":"true"},null,-1),rs={key:12,class:"is-truncated"},hs=t("i",{class:"fas fa-x","aria-hidden":"true"},null,-1),_s={key:13,class:"is-truncated"},us=t("span",{class:"has-text-danger"},[t("i",{class:"fas fa-triangle-exclamation","aria-hidden":"true"})],-1),fs={key:14,class:"has-text-centered"},ms=t("span",{class:"has-text-success"},[t("i",{class:"fas fa-circle-check","aria-hidden":"true"})],-1),ps=[ms],ys={key:15,class:"has-text-centered"},bs=t("span",{class:"has-text-danger"},[t("i",{class:"fas fa-circle-xmark","aria-hidden":"true"})],-1),ks=[bs],vs={class:"has-text-centered"},gs=t("span",{class:"icon"},[t("i",{class:"fas fa-plus"})],-1),$s=t("span",null,"Add Path",-1),ws=t("span",{class:"icon"},[t("i",{class:"fas fa-code"})],-1),Cs=t("span",null,"Deploy Redirector",-1);function Ds(l,e,r,$,i,_){const d=k("RouterLink"),h=k("AllPathsEnableDisable"),x=k("RedirectorDelete"),A=k("PathDelete"),p=w("tooltip");return s(),C(M,null,{default:y(()=>[i.isLoading===!1?(s(),a("div",Rt,[t("div",null,[f(d,{class:"button is-link",to:"/redirectors/add"},{default:y(()=>[Pt,Et]),_:1}),n(" \xA0 "),f(h,{status:"enable",onAfterChange:_.getRedirectors},null,8,["onAfterChange"]),n(" \xA0 "),f(h,{status:"disable",onAfterChange:_.getRedirectors},null,8,["onAfterChange"])]),Tt,(s(!0),a(b,null,D(i.redirectors,u=>(s(),a("article",{class:"message is-primary",key:u.id},[t("div",Lt,[t("div",null,[t("p",Nt,[jt,n("\xA0 "),f(d,{to:{name:"redirectors-edit",params:{id:u.id}}},{default:y(()=>[n(c(u.hostname),1)]),_:2},1032,["to"])]),t("p",null,c(u.notes),1)]),f(x,{hostname:u.hostname,id:u.id,onAfterDelete:_.getRedirectors},null,8,["hostname","id","onAfterDelete"])]),t("div",Vt,[t("table",Bt,[Ut,t("tbody",null,[(s(!0),a(b,null,D(u.paths,o=>(s(),a("tr",{key:o.id},[t("td",null,[m((s(),a("a",St,[t("i",{class:"fas fa-copy",onClick:xs=>_.copyToClipboard(o.url)},null,8,Ft)])),[[p,"Copy URL to clipboard",void 0,{top:!0}]])]),t("td",It,[m((s(),C(d,{to:{name:"paths-edit",params:{path_id:o.id,redirector_id:u.id}}},{default:y(()=>[n(c(o.path),1)]),_:2},1032,["to"])),[[p,o.path,void 0,{top:!0}]])]),o.policy_name?(s(),a("td",zt,c(o.policy_name),1)):(s(),a("td",Gt,"None")),o.allow_action==="payload"&&o.payload_name?(s(),a("td",qt,[Ht,n(" "+c(o.payload_name),1)])):o.allow_action==="file"&&o.file_name?(s(),a("td",Jt,[Kt,n(" "+c(o.file_name),1)])):o.allow_action==="passthrough"?m((s(),a("td",Ot,[Qt,n(" Passthrough")])),[[p,o.passthrough_url,void 0,{top:!0}]]):o.allow_action==="302"?m((s(),a("td",Wt,[Xt,n(" 302")])),[[p,o.redirect_url,void 0,{top:!0}]]):o.allow_action==="404"?(s(),a("td",Yt,[Zt,n(" 404")])):(s(),a("td",ts,[ss,n(" None")])),o.deny_action==="payload"&&o.deny_payload_name?(s(),a("td",es,[os,n(" "+c(o.deny_payload_name),1)])):o.deny_action==="file"&&o.deny_file_name?(s(),a("td",as,[ls,n(" "+c(o.deny_file_name),1)])):o.deny_action==="passthrough"?m((s(),a("td",is,[ns,n(" Passthrough")])),[[p,o.deny_passthrough_url,void 0,{top:!0}]]):o.deny_action==="302"?m((s(),a("td",ds,[cs,n(" 302")])),[[p,o.deny_redirect_url,void 0,{top:!0}]]):o.deny_action==="404"?(s(),a("td",rs,[hs,n(" 404")])):(s(),a("td",_s,[us,n(" None")])),o.enabled?(s(),a("td",fs,ps)):(s(),a("td",ys,ks)),t("td",vs,[f(A,{path:o.path,path_id:o.id,redirector_id:u.id,onAfterDelete:_.getRedirectors},null,8,["path","path_id","redirector_id","onAfterDelete"])])]))),128))])]),f(d,{class:"button is-link is-outlined",to:{name:"paths-add",params:{redirector_id:u.id}}},{default:y(()=>[gs,$s]),_:2},1032,["to"]),n(" \xA0 "),f(d,{class:"button is-link is-outlined",to:{name:"redirectors-deploy",params:{id:u.id}}},{default:y(()=>[ws,Cs]),_:2},1032,["to"])])]))),128))])):g("",!0)]),_:1})}const Ps=v(Mt,[["render",Ds]]);export{Ps as default};
